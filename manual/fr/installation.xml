<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
    "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [
  <!ENTITY % commondata SYSTEM "common.ent" > %commondata;
]>
<chapter id="installation">
<title>Installation</title>

<section>
<title>Prérequis</title>

<para>Construire des systèmes Debian Live ne nécessite que très peu de prérequis:</para>

<orderedlist>
<listitem><para>Un accès super-utilisateur (root)</para></listitem>
<listitem><para>Une version à jour de &live-helper;</para></listitem>
<listitem><para>Un shell compatible POSIX comme <command>bash</command> ou
<command>dash</command>.</para></listitem>
<listitem><para><command>debootstrap</command> ou <command>cdebootstrap</command></para></listitem>
<listitem><para>Linux 2.6.x</para></listitem>
</orderedlist>

<para>Noter qu'il n'est pas nécessaire d'utiliser Debian ou une distribution
dérivée de Debian.&live-helper;s'exécutera su presque tous les systèmes
d'exploitation remplissant les conditions ci-dessus.</para>

</section>

<section>
<title>Installer &live-helper;</title>

<para>Vous pouvez installer &live-helper; de manière très variées:</para>

<orderedlist>
<listitem><para>Depuis le dépot Debian</para></listitem>
<listitem><para>Depuis les sources</para></listitem>
<listitem><para>Depuis les snapshots</para></listitem>
<listitem><para>Depuis backports.org</para></listitem>
</orderedlist>

<para>Si vous utilisez &lenny; ou &sid; il est conseillé d'installer &live-helper;
depuis le dépot Debian.</para>

<section>
<title>Depuis le dépot Debian</title>

<para>Installer simplement &live-helper; comme n'importe quel autre paquet:</para>
<screen># apt-get install live-helper</screen>
<para>ou</para>
<screen># aptitude install live-helper</screen>

</section>

<section>
<title>Depuis les sources</title>

<para>&live-helper; est développé avec le système de contrôle de version Git. Sur
les systèmes Debian, il est fourni par le paquet
<command>git-core</command>. Pour rapatrier la dernière version, exécuter:</para>
<screen>$ git clone git://live.debian.net/git/live-helper.git</screen>
<para>Vous pouvez construire et installer votre propre paquet Debian en exécutant:</para>
<screen>
 $ cd live-helper
 $ dpkg-buildpackage -rfakeroot -b -uc -us
 $ cd ..
 # dpkg -i live-helper*.deb
</screen>
<para>Vous pouvez aussi utiliser une version locale de &live-helper; sans
installation:</para>
<screen># live-helper/helpers/lh_local</screen>
<para>Subsequent calls to <filename>lh_</filename>-prefixed helpers in that shell
environment will then use the version located in the directory you executed
<filename>lh_local</filename> from.</para>
<para>Vous pouvez aussi installer &live-helper; directement sur votre système en
exécutant:</para>
<screen># make install</screen>

</section>

<section>
<title>Depuis les 'snapshots'</title>
<para>If you do not wish to build or install &live-helper; from source, you can
use snapshots. These are built automatically from the latest version in Git
and are available on <ulink
url="http://live.debian.net/debian/">http://live.debian.net/debian</ulink>.</para>
</section>

<section>
<title>&live-initramfs;</title>

<para><emphasis>N.B. Vous n'êtes pas obligé d'installer &live-initramfs; sur votre
système pour créer des systèmes Debian Live personnalisés. Cependant,
l'installer ne nuira pas</emphasis></para>

<section>
<title>Utiliser un &live-initramfs; personnalisé</title>

<para>Pour modifer le code vous pouvez suivre la procédure suivante. Assurez-vous,
svp, d'être familier avec les définitions mentionnées dans <xref
linkend="terms"/>.</para>

<orderedlist>
<listitem>
<para>Rapatrier les sources de &live-initramfs;</para>
<screen>$ git clone git://live.debian.net/git/live-initramfs.git</screen>
</listitem>
<listitem>
<para>Faites les changements sur votre copie locale</para>
<para>Et prenez garde que si vous voulez ajouter votre script pre-init à
live-bottom, vous devriez le nommer sans tirets '-', par exemple, appeler le
"81nouvelle_fonctionalite" et non "81nouvelle-fonctionalite".</para>
</listitem>
<listitem>
<para>Constuire un .deb de &live-initramfs;</para>
<para>You must build either on your target distribution or in a chroot containing
your target platform: this means if your target is lenny then you should
build against lenny. You can use a personal builder such as
<command>pbuilder</command> to automate building packages in chroot. To
build directly on the target platform, use
<command>dpkg-buildpackage</command> (provided by the
<command>dpkg-dev</command> package):</para>
<screen>
$ cd live-initramfs
$ dpkg-buildpackage -rfakeroot -b -uc -us
</screen>
</listitem>
<listitem>
<para>Utiliser le <command>.deb</command> ainsi généré de &live-initramfs;</para>
<para>As &live-initramfs; is installed by the build system, installing the package
in the host system is not sufficient: you should treat the generated
<command>.deb</command> like another custom package. Please see <xref
linkend="custom-packages"/> for more information. You should pay particular
attention to <xref linkend="custom-packages-apt"/>.</para>
</listitem>
</orderedlist>
</section>

<section>
<title>Using &live-initramfs; snapshots</title>

<para>You can let &live-helper; automatically use the latest snapshot of
&live-initramfs; by configuring a third-party repository in your live-system
configuration. Assuming you have already created a configuration tree with
<command>lh config</command>:</para>

<orderedlist>
<listitem>
<para>Créer une entrée dans le fichier sources.list pour l'étape du chroot:</para>
<screen>echo "deb http://live.debian.net/ sid-snapshots main contrib non-free" > config/chroot_sources/debian-live_sid-snapshots.chroot</screen>
</listitem>
<listitem>
<para>Create a sources.list entry for the binary stage:</para>
<screen>cp config/chroot_sources/debian-live_sid-snapshots.chroot config/chroot_sources/debian-live_sid-snapshots.binary</screen>
</listitem>
<listitem>
<para>Fetch the archive signing key:</para>
<screen>
wget http://live.debian.net/debian/project/openpgp/archive-key.asc -O config/chroot_sources/debian-live_sid-snapshots.chroot.gpg
cp config/chroot_sources/debian-live_sid-snapshots.chroot.gpg config/chroot_sources/debian-live_sid-snapshots.binary.gpg
</screen>
</listitem>
</orderedlist>
</section>
</section>
</section>
</chapter>
